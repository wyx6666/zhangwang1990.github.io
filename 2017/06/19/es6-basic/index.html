<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> es6Basic · Wang's Plot</title><meta name="description" content="es6Basic - zhang wang"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Wang's Plot"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/zhangwang1990" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">es6Basic</h1><div class="post-info">Jun 19, 2017</div><div class="post-content"><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>其实平时做项目时，无意识的已经在使用ES6提供的一些新特效了（<code>let</code>,<code>const</code>,<code>promise</code>,<code>Template strings</code>,<code>Class</code>,箭头函数等等）。但是虽然ES7都出来了，ES6中的一些非常有效的特性我却没怎么用，当人们这些新特性中的很多单一点就能写一篇复杂的文章，本文并不是那种大而全的文章，而企图以简洁的文字配合示例来说清各新特性的作用和用法。</p>
<p>本文的主体结构继承自<a href="https://github.com/lukehoban/es6features" target="_blank" rel="external">ECMAScript 6 Features</a>，大家可以把本文看做加注释的翻译。</p>
<a id="more"></a>
<h3 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h3><p>ECMAScript6 又称ECMAScript2015，是ECMAScript标准的最新版(现在应该是ES7了），对JS语言而言，ES6是一个重大更新，也是自2009年发布ES5之后的第一次更新，浏览器对ES6标准的支持也是<a href="http://kangax.github.io/compat-table/es6/" target="_blank" rel="external">越来越好</a>。对ES6完整的叙述可见<a href="http://www.ecma-international.org/ecma-262/6.0/" target="_blank" rel="external">ES6 standard</a>。</p>
<p>简单说来，ES6的更新主要为以下方面（大家可以依据自己不算清晰的点选择性查看本文）：</p>
<ul>
<li>Arrows,箭头函数</li>
<li>Classes，类</li>
<li>Enhanced object literals，增强的对象字面值</li>
<li>Template strings：模板字符串</li>
<li>Destructuring：解构</li>
<li>Default + rest + spread：参数默认值，rest参数,扩展运算符</li>
<li>Let + const:命名声明的新方式</li>
<li>Iterators + for..of：遍历器</li>
<li>Generators：生成器</li>
<li>Unicode：</li>
<li>Modules：模块</li>
<li>Module loaders：模块加载器</li>
<li>Map + set + weakmap + weakset：新的数据结构</li>
<li>Proxies：代理器</li>
<li>Symbols：新的基本类型，独一无二的值</li>
<li>Subclassable built-ins：类的继承</li>
<li>Promises：</li>
<li>Math + number + string + array + object apis：新的api</li>
<li>Binary and octal literals：二进制八进制字面量</li>
<li>Reflect api：操作对象的新api</li>
<li>Tail calls:尾调用</li>
</ul>
<h3 id="Arrows箭头函数"><a href="#Arrows箭头函数" class="headerlink" title="Arrows箭头函数"></a>Arrows箭头函数</h3><p>箭头函数使用类似于<code>=&gt;</code>这样的语法，支持表达式模式和语句模式。其最大特点在于和父作用域具有一样的<code>this</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 表达式模式</span></div><div class="line"><span class="keyword">var</span> odds = evens.map(<span class="function"><span class="params">v</span> =&gt;</span> v + <span class="number">1</span>);</div><div class="line"><span class="keyword">var</span> nums = evens.map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> v + i);</div><div class="line"><span class="keyword">var</span> pairs = evens.map(<span class="function"><span class="params">v</span> =&gt;</span> (&#123;<span class="attr">even</span>: v, <span class="attr">odd</span>: v + <span class="number">1</span>&#125;));</div><div class="line"></div><div class="line"><span class="comment">// 语句模式</span></div><div class="line">nums.forEach(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">if</span> (v % <span class="number">5</span> === <span class="number">0</span>)</div><div class="line">    fives.push(v);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// 和父作用域具有相同的this</span></div><div class="line"><span class="keyword">var</span> bob = &#123;</div><div class="line">  <span class="attr">_name</span>: <span class="string">"Bob"</span>,</div><div class="line">  <span class="attr">_friends</span>: [],</div><div class="line">  printFriends() &#123;</div><div class="line">    <span class="keyword">this</span>._friends.forEach(<span class="function"><span class="params">f</span> =&gt;</span></div><div class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>._name + <span class="string">" knows "</span> + f));</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Classes"><a href="#Classes" class="headerlink" title="Classes"></a>Classes</h3><p>JavaScript中其实并不存在真正的类，ES6的类是基于原型链模拟面向对象的一种语法糖，支持<code>super</code>继承，实例，静态方法和<code>constructor</code>方法。不过ES6 的类，完全可以看作构造函数的另一种写法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Class 可以通过extends关键字实现继承</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SkinnedMesh</span> <span class="keyword">extends</span> <span class="title">THREE</span>.<span class="title">Mesh</span> </span>&#123;</div><div class="line">  <span class="comment">//constructor方法是类的默认方法，通过new命令生成对象实例时，自动调用该方法。</span></div><div class="line">  <span class="comment">//一个类必须有constructor方法，如果没有显式定义，一个空的constructor方法会被默认添加。</span></div><div class="line">  <span class="keyword">constructor</span>(geometry, materials) &#123;</div><div class="line">    <span class="comment">// super的第一种用法，表示父类的构造函数，用来新建父类的this对象,</span></div><div class="line">    <span class="comment">// 子类必须在constructor方法中调用super方法，否则新建实例时会报错。如果不调用super方法，子类就得不到this对象。</span></div><div class="line">    <span class="keyword">super</span>(geometry, materials);</div><div class="line"></div><div class="line">    <span class="comment">//在构造方法中绑定this,可以防止实例找不到this</span></div><div class="line">    <span class="keyword">this</span>.idMatrix = SkinnedMesh.defaultMatrix();</div><div class="line">    <span class="keyword">this</span>.bones = [];</div><div class="line">    <span class="keyword">this</span>.boneMatrices = [];</div><div class="line">    <span class="comment">//...</span></div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="comment">// 非定义在this上的方法都会被直接定义在原型链上</span></div><div class="line">  update(camera) &#123;</div><div class="line">    <span class="comment">//...</span></div><div class="line">    <span class="comment">// super的第二种用法：作为对象，在普通方法中，指向父类的原型对象；在静态方法中，指向父类。</span></div><div class="line">    <span class="keyword">super</span>.update();</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// 可以使用get和set关键字，对某个属性设置存值函数和取值函数</span></div><div class="line">  get boneCount() &#123;</div><div class="line">  <span class="comment">// 类的方法内部如果含有this，它默认指向类的实例</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.bones.length;</div><div class="line">  &#125;</div><div class="line">  set matrixType(matrixType) &#123;</div><div class="line">    <span class="keyword">this</span>.idMatrix = SkinnedMesh[matrixType]();</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="comment">// 加上static关键字，就表示该方法不会被实例继承，而是直接通过类来调用</span></div><div class="line">  <span class="keyword">static</span> defaultMatrix() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> THREE.Matrix4();</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 类的所有实例共享一个原型对象</span></div><div class="line"><span class="keyword">let</span> skin = <span class="keyword">new</span> SkinnedMesh();</div><div class="line"><span class="comment">// 调用静态方法</span></div><div class="line">skin.defaultMatrix()</div></pre></td></tr></table></figure>
<h3 id="对象的拓展"><a href="#对象的拓展" class="headerlink" title="对象的拓展"></a>对象的拓展</h3><p>ES6中对象的使用方法得以拓展：</p>
<ul>
<li>属性和方法可以简洁表示:</li>
<li>允许以表达式的模式定义属性名；</li>
<li>可以通过<code>__proto__</code>读取或设置当前对象的prototype对象;</li>
<li>使用<code>Object.is({},{})</code>判断两个对象是否完全相对，类似于<code>===</code>;</li>
<li><code>Object.assign(target, source1, source2)</code>合并对象；（浅拷贝）</li>
<li></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    <span class="comment">// __proto__用以设置当前对象的prototype对象，不推荐使用，推荐使用Object.setPrototypeOf() </span></div><div class="line">    __proto__: theProtoObj,</div><div class="line">    <span class="comment">// Shorthand for ‘handler: handler’,只需要写变量名就可以实现变量名为变量名，变量值为属性值（方法）</span></div><div class="line">    handler,</div><div class="line">    <span class="comment">// Methods</span></div><div class="line">    toString() &#123;</div><div class="line">     <span class="comment">// Super calls</span></div><div class="line">     <span class="keyword">return</span> <span class="string">"d "</span> + <span class="keyword">super</span>.toString();</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// 方括号内的表达式用以计算属性名</span></div><div class="line">    [ <span class="string">'prop_'</span> + <span class="function">(<span class="params">(</span>) =&gt;</span> <span class="number">42</span>)() ]: <span class="number">42</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h3><p>模板字符串是一种组合字符串的语法糖，其使用类似于<code>Perl</code>,<code>Python</code>等语言的字符串修改方法类似，它的出现让我们拼合字符串时方便多了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 把字符串放在``(注意不是引号)中就可以使用</span></div><div class="line"><span class="string">`In JavaScript '\n' is a line-feed.`</span></div><div class="line"></div><div class="line"><span class="comment">// 模板字符串保留了换行</span></div><div class="line"><span class="string">`In JavaScript this is</span></div><div class="line"> not legal.`</div><div class="line"></div><div class="line"><span class="comment">// 在字符串中添加变量的方法，变量直接放在$&#123;&#125;中即可</span></div><div class="line"><span class="keyword">var</span> name = <span class="string">"Bob"</span>, time = <span class="string">"today"</span>;</div><div class="line"><span class="string">`Hello <span class="subst">$&#123;name&#125;</span>, how are you <span class="subst">$&#123;time&#125;</span>?`</span></div><div class="line"></div><div class="line"><span class="comment">// 拼合请求时异常方便了</span></div><div class="line">POST<span class="string">`http://foo.org/bar?a=<span class="subst">$&#123;a&#125;</span>&amp;b=<span class="subst">$&#123;b&#125;</span></span></div><div class="line">     Content-Type: application/json</div><div class="line">     X-Credentials: <span class="subst">$&#123;credentials&#125;</span></div><div class="line">     &#123; "foo": <span class="subst">$&#123;foo&#125;</span>,</div><div class="line">       "bar": <span class="subst">$&#123;bar&#125;</span>&#125;`(myOnReadyStateChangeHandler);</div></pre></td></tr></table></figure>
<h3 id="Destructuring-解构"><a href="#Destructuring-解构" class="headerlink" title="Destructuring 解构"></a>Destructuring 解构</h3><p>解构使用模式匹配的方法绑定变量和值，数组和对象都可使用。解构在绑定失败的时会实现软绑定，即没有匹配值时，返回<code>undefined</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 数组解构</span></div><div class="line"><span class="keyword">var</span> [a, , b] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line"></div><div class="line"><span class="comment">// 对象解构</span></div><div class="line"><span class="keyword">var</span> &#123; <span class="attr">op</span>: a, <span class="attr">lhs</span>: &#123; <span class="attr">op</span>: b &#125;, <span class="attr">rhs</span>: c &#125;</div><div class="line">       = getASTNode()</div><div class="line"></div><div class="line"><span class="keyword">var</span> &#123;op, lhs, rhs&#125; = getASTNode()</div><div class="line"></div><div class="line"><span class="comment">// 对象解构也能用在函数的参数中</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">g</span>(<span class="params">&#123;name: x&#125;</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(x);</div><div class="line">&#125;</div><div class="line">g(&#123;<span class="attr">name</span>: <span class="number">5</span>&#125;)</div><div class="line"></div><div class="line"><span class="comment">// 绑定失败时返回undefined</span></div><div class="line"><span class="keyword">var</span> [a] = [];</div><div class="line">a === <span class="literal">undefined</span>;</div><div class="line"></div><div class="line"><span class="comment">// 解构时也可以绑定默认值</span></div><div class="line"><span class="keyword">var</span> [a = <span class="number">1</span>] = [];</div><div class="line">a === <span class="number">1</span>;</div></pre></td></tr></table></figure>
<h3 id="默认值，剩余值和拓展值"><a href="#默认值，剩余值和拓展值" class="headerlink" title="默认值，剩余值和拓展值"></a>默认值，剩余值和拓展值</h3><p>ES6允许我们在多个地方给变量添加默认值，在函数调用时传入数组作为连续的参数。可以把函数把尾部的参数转换为一个数组。这样以来使用<code>rest</code>就可以替换以前的<code>arguments</code>对象了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 给函数的参数添加默认值</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y=<span class="number">12</span></span>) </span>&#123;</div><div class="line">  <span class="comment">// y is 12 if not passed (or passed as undefined)</span></div><div class="line">  <span class="keyword">return</span> x + y;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 可以只传参数x的值了</span></div><div class="line">f(<span class="number">3</span>) == <span class="number">15</span></div><div class="line"></div><div class="line"><span class="comment">// 使用rest</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, ...y</span>) </span>&#123;</div><div class="line">  <span class="comment">// y is an Array</span></div><div class="line">  <span class="keyword">return</span> x * y.length;</div><div class="line">&#125;</div><div class="line">f(<span class="number">3</span>, <span class="string">"hello"</span>, <span class="literal">true</span>) == <span class="number">6</span></div><div class="line"></div><div class="line"><span class="comment">// 传入数组作为参数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y, z</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> x + y + z;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 直接传入数组当作上面函数的参数</span></div><div class="line">f(...[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]) == <span class="number">6</span></div></pre></td></tr></table></figure>
<h3 id="Let-和-Const"><a href="#Let-和-Const" class="headerlink" title="Let 和 Const"></a>Let 和 Const</h3><p>ES6新增了块作用域，且新增了两种定义变量的方法，<code>let</code>现在可以用以替代<code>var</code>了，它在一个块作用域内有效，<code>const</code>用以指定固定值，这两类新定义的变量不允许在定义前使用，也不允许重复定义。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  &#123;</div><div class="line">    <span class="keyword">let</span> x;</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">const</span> x = <span class="string">"sneaky"</span>;</div><div class="line">      <span class="comment">// 改变const</span></div><div class="line">      x = <span class="string">"foo"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 重复定义会出错</span></div><div class="line">    <span class="keyword">let</span> x = <span class="string">"inner"</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Iterators-For-Of"><a href="#Iterators-For-Of" class="headerlink" title="Iterators + For..Of"></a>Iterators + For..Of</h3><p>ES6为部署了Iterator接口的各种不同的数据结构提供了统一的访问机制。其本质是一个指针对象。每次调用<code>next</code>方法，可以把指针指向数据结构的下一个成员。具体说来，每一次调用next方法，都会返回数据结构的当前成员的信息（一个包含value和done两个属性的对象，value属性是当前成员的值，done属性是一个布尔值，表示遍历是否结束）。</p>
<p>凡是部署了Symbol.iterator属性的数据结构，就称为部署了遍历器接口。调用这个接口，就会返回一个遍历器对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> fibonacci = &#123;</div><div class="line">  <span class="comment">// 一个数据结构只要具有Symbol.iterator属性，就可被任务是可遍历的，Symbol.iterator是一个表达式，返回Symbol对象的iterator属性，所以需要放在[]中，但是其本身是当前数据结构的遍历器生成函数。</span></div><div class="line">  [<span class="built_in">Symbol</span>.iterator]() &#123;</div><div class="line">    <span class="keyword">let</span> pre = <span class="number">0</span>, cur = <span class="number">1</span>;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      next() &#123;</div><div class="line">        [pre, cur] = [cur, pre + cur];</div><div class="line">        <span class="keyword">return</span> &#123; <span class="attr">done</span>: <span class="literal">false</span>, <span class="attr">value</span>: cur &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// fibonacci部署了Symbol.iterator属性，只要done不为true就会一直遍历</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> n <span class="keyword">of</span> fibonacci) &#123;</div><div class="line"><span class="comment">// 调用1000以内的值做遍历</span></div><div class="line">  <span class="keyword">if</span> (n &gt; <span class="number">1000</span>)</div><div class="line">    <span class="keyword">break</span>;</div><div class="line">  <span class="built_in">console</span>.log(n);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>原生具备<code>Iterator</code>接口的数据结构有以下几种:数组、某些类似数组的对象（字符串、DOM NodeList 对象、arguments对象）、Set和Map结构，对象（Object）之所以没有默认部署Iterator接口，是因为对象的哪个属性先遍历，哪个属性后遍历是不确定的，需要开发者手动指定，必须在Symbol.iterator的属性上部署遍历器生成方法（原型链上的对象具有该方法也可）。</p>
</blockquote>
<h3 id="Generators"><a href="#Generators" class="headerlink" title="Generators"></a>Generators</h3><p><code>Generators</code>函数既是状态机也是一个遍历器对象生成函数。执行该函数可以理解为启动了遍历器，之后每次执行<code>next()</code>函数则每次执行到<code>yield</code>处。</p>
<p><code>next()</code>可以添加参数，用以实现在函数运行的不同阶段，从外部向内部注入不同的值，</p>
<p>生成器使用<code>function*</code>和<code>yield</code>简化了迭代过程，使用<code>function*</code>定义的函数返回了一个生成器实例。生成器是迭代器的子类，但是包含<code>next</code>和<code>throw</code>。这使得值可以回流到生成器，<code>yield</code>是一个可以返回值的表达式。</p>
<p><code>for...of</code>循环可以自动遍历 <code>Generator</code> 函数时生成的<code>Iterator</code>对象，且此时不再需要调用<code>next</code>方法。</p>
<p><code>return</code>方法会返回固定的值，并终结遍历Generator函数。返回值的value属性就是return方法的参数，返回值的done属性为true。</p>
<p>结合<code>co</code>模块可以实现比Promise更加优雅的异步调用方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 使用generator函数实现上述遍历器对象</span></div><div class="line"><span class="keyword">var</span> fibonacci = &#123;</div><div class="line">  [<span class="built_in">Symbol</span>.iterator]: <span class="function"><span class="keyword">function</span>*(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> pre = <span class="number">0</span>, cur = <span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> (;;) &#123;</div><div class="line">      <span class="keyword">var</span> temp = pre;</div><div class="line">      pre = cur;</div><div class="line">      cur += temp;</div><div class="line">      <span class="keyword">yield</span> cur;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> n <span class="keyword">of</span> fibonacci) &#123;</div><div class="line">  <span class="comment">// truncate the sequence at 1000</span></div><div class="line">  <span class="keyword">if</span> (n &gt; <span class="number">1000</span>)</div><div class="line">    <span class="keyword">break</span>;</div><div class="line">  <span class="built_in">console</span>.log(n);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 使用co模块（基于 Promise 对象的自动执行器），可以实现异步函数的自动执行</span></div><div class="line"><span class="keyword">var</span> gen = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> f1 = <span class="keyword">yield</span> somethingAsync();</div><div class="line">  <span class="keyword">var</span> f2 = <span class="keyword">yield</span> anotherThingAsync();</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> co = <span class="built_in">require</span>(<span class="string">'co'</span>);</div><div class="line">co(gen);</div></pre></td></tr></table></figure>
<h3 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h3><p>完整支持所有的Unicode,包括新的字符串形式的<code>Unicode</code>字面量和新的处理代码点的<code>u</code>模式正则，提供了新的API来处理<code>21bit</code>代码点级别的字符串。这些新加特性使得可以使用JavaScript构建支持各类语言的应用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// same as ES5.1</span></div><div class="line"><span class="string">"𠮷"</span>.length == <span class="number">2</span></div><div class="line"></div><div class="line"><span class="comment">// new RegExp behaviour, opt-in ‘u’</span></div><div class="line"><span class="string">"𠮷"</span>.match(<span class="regexp">/./u</span>)[<span class="number">0</span>].length == <span class="number">2</span></div><div class="line"></div><div class="line"><span class="comment">// new form</span></div><div class="line"><span class="string">"\u&#123;20BB7&#125;"</span>==<span class="string">"𠮷"</span>==<span class="string">"\uD842\uDFB7"</span></div><div class="line"></div><div class="line"><span class="comment">// new String ops</span></div><div class="line"><span class="string">"𠮷"</span>.codePointAt(<span class="number">0</span>) == <span class="number">0x20BB7</span></div><div class="line"></div><div class="line"><span class="comment">// for-of iterates code points</span></div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> c <span class="keyword">of</span> <span class="string">"𠮷"</span>) &#123;</div><div class="line">  <span class="built_in">console</span>.log(c);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h3><p>对模块的定义提供了语言层面的支持。规范化了各种JavaScript模块加载器（AMD，CommonJS），支持运行时动态加载模块，支持异步加载模块。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// lib/math.js 模块的定义</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> x + y;</div><div class="line">&#125;</div><div class="line"><span class="keyword">export</span> <span class="keyword">var</span> pi = <span class="number">3.141593</span>;</div><div class="line"></div><div class="line"><span class="comment">// app.js 模块的全部引用</span></div><div class="line"><span class="keyword">import</span> * <span class="keyword">as</span> math <span class="keyword">from</span> <span class="string">"lib/math"</span>;</div><div class="line">alert(<span class="string">"2π = "</span> + math.sum(math.pi, math.pi));</div><div class="line"></div><div class="line"><span class="comment">// otherApp.js 模块的部分引用</span></div><div class="line"><span class="keyword">import</span> &#123;sum, pi&#125; <span class="keyword">from</span> <span class="string">"lib/math"</span>;</div><div class="line">alert(<span class="string">"2π = "</span> + sum(pi, pi));</div><div class="line"></div><div class="line"><span class="comment">// 模块导出方法</span></div><div class="line"><span class="comment">// lib/mathplusplus.js</span></div><div class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">"lib/math"</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">var</span> e = <span class="number">2.71828182846</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.log(x);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 混合引入方法</span></div><div class="line"><span class="keyword">import</span> ln, &#123;pi, e&#125; <span class="keyword">from</span> <span class="string">"lib/mathplusplus"</span>;</div><div class="line">alert(<span class="string">"2π = "</span> + ln(e)*pi*<span class="number">2</span>);</div></pre></td></tr></table></figure>
<h3 id="Module-Loaders"><a href="#Module-Loaders" class="headerlink" title="Module Loaders"></a>Module Loaders</h3><p>模块加载器支持以下功能：</p>
<ul>
<li>动态加载</li>
<li>状态隔离</li>
<li>全局命名空间隔离</li>
<li>编写钩子</li>
<li>嵌套</li>
</ul>
<p>默认的模块加载器可以被配置，新的加载器可以被配置来评估加载独立上下文中的内容。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Dynamic loading – ‘System’ is default loader</span></div><div class="line">System.import(<span class="string">'lib/math'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">m</span>) </span>&#123;</div><div class="line">  alert(<span class="string">"2π = "</span> + m.sum(m.pi, m.pi));</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// Create execution sandboxes – new Loaders</span></div><div class="line"><span class="keyword">var</span> loader = <span class="keyword">new</span> Loader(&#123;</div><div class="line">  <span class="attr">global</span>: fixup(<span class="built_in">window</span>) <span class="comment">// replace ‘console.log’</span></div><div class="line">&#125;);</div><div class="line">loader.eval(<span class="string">"console.log('hello world!');"</span>);</div><div class="line"></div><div class="line"><span class="comment">// Directly manipulate module cache</span></div><div class="line">System.get(<span class="string">'jquery'</span>);</div><div class="line">System.set(<span class="string">'jquery'</span>, Module(&#123;<span class="attr">$</span>: $&#125;)); <span class="comment">// WARNING: not yet finalized</span></div></pre></td></tr></table></figure>
<h3 id="Map-Set-WeakMap-WeakSet"><a href="#Map-Set-WeakMap-WeakSet" class="headerlink" title="Map Set WeakMap WeakSet"></a>Map Set WeakMap WeakSet</h3><p>ES6为算法提供了高效的数据结构，<code>WeakMaps</code>提供了，防泄漏的键值对表。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Sets</span></div><div class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>();</div><div class="line">s.add(<span class="string">"hello"</span>).add(<span class="string">"goodbye"</span>).add(<span class="string">"hello"</span>);</div><div class="line">s.size === <span class="number">2</span>;</div><div class="line">s.has(<span class="string">"hello"</span>) === <span class="literal">true</span>;</div><div class="line"></div><div class="line"><span class="comment">// Maps</span></div><div class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>();</div><div class="line">m.set(<span class="string">"hello"</span>, <span class="number">42</span>);</div><div class="line">m.set(s, <span class="number">34</span>);</div><div class="line">m.get(s) == <span class="number">34</span>;</div><div class="line"></div><div class="line"><span class="comment">// Weak Maps</span></div><div class="line"><span class="keyword">var</span> wm = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</div><div class="line">wm.set(s, &#123; <span class="attr">extra</span>: <span class="number">42</span> &#125;);</div><div class="line">wm.size === <span class="literal">undefined</span></div><div class="line"></div><div class="line"><span class="comment">// Weak Sets</span></div><div class="line"><span class="keyword">var</span> ws = <span class="keyword">new</span> <span class="built_in">WeakSet</span>();</div><div class="line">ws.add(&#123; <span class="attr">data</span>: <span class="number">42</span> &#125;);</div><div class="line"><span class="comment">// Because the added object has no other references, it will not be held in the set</span></div></pre></td></tr></table></figure>
<h3 id="Proxies"><a href="#Proxies" class="headerlink" title="Proxies"></a>Proxies</h3><p>Proxies提供了对宿主对象创建完全可用的对象的能力，可用被用做监听，对象虚拟化，logging/profiling 等；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Proxying a normal object</span></div><div class="line"><span class="keyword">var</span> target = &#123;&#125;;</div><div class="line"><span class="keyword">var</span> handler = &#123;</div><div class="line">  <span class="attr">get</span>: <span class="function"><span class="keyword">function</span> (<span class="params">receiver, name</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">`Hello, <span class="subst">$&#123;name&#125;</span>!`</span>;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Proxy</span>(target, handler);</div><div class="line">p.world === <span class="string">'Hello, world!'</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// Proxying a function object</span></div><div class="line"><span class="keyword">var</span> target = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="string">'I am the target'</span>; &#125;;</div><div class="line"><span class="keyword">var</span> handler = &#123;</div><div class="line">  <span class="attr">apply</span>: <span class="function"><span class="keyword">function</span> (<span class="params">receiver, ...args</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'I am the proxy'</span>;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Proxy</span>(target, handler);</div><div class="line">p() === <span class="string">'I am the proxy'</span>;</div></pre></td></tr></table></figure>
<p>There are traps available for all of the runtime-level meta-operations:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> handler =</div><div class="line">&#123;</div><div class="line">  <span class="attr">get</span>:...,</div><div class="line">  <span class="attr">set</span>:...,</div><div class="line">  <span class="attr">has</span>:...,</div><div class="line">  <span class="attr">deleteProperty</span>:...,</div><div class="line">  <span class="attr">apply</span>:...,</div><div class="line">  <span class="attr">construct</span>:...,</div><div class="line">  <span class="attr">getOwnPropertyDescriptor</span>:...,</div><div class="line">  <span class="attr">defineProperty</span>:...,</div><div class="line">  <span class="attr">getPrototypeOf</span>:...,</div><div class="line">  <span class="attr">setPrototypeOf</span>:...,</div><div class="line">  <span class="attr">enumerate</span>:...,</div><div class="line">  <span class="attr">ownKeys</span>:...,</div><div class="line">  <span class="attr">preventExtensions</span>:...,</div><div class="line">  <span class="attr">isExtensible</span>:...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Symbols"><a href="#Symbols" class="headerlink" title="Symbols"></a>Symbols</h3><p>Symbols允许控制对象的状态，ES6中对象属性的名称可用是字符串也可以是<code>symbol</code>了，symbol是一种新的基本类型，可选<code>description</code>参数可用于调试，但是并未被官方认证。Symbols是唯一的，单并非私有的，通过<code>Object.getOwnPropertySymbols</code>可以获取对应的值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MyClass = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">// module scoped symbol</span></div><div class="line">  <span class="keyword">var</span> key = <span class="built_in">Symbol</span>(<span class="string">"key"</span>);</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">MyClass</span>(<span class="params">privateData</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>[key] = privateData;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  MyClass.prototype = &#123;</div><div class="line">    <span class="attr">doStuff</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      ... this[key] ...</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> MyClass;</div><div class="line">&#125;)();</div><div class="line"></div><div class="line"><span class="keyword">var</span> c = <span class="keyword">new</span> MyClass(<span class="string">"hello"</span>)</div><div class="line">c[<span class="string">"key"</span>] === <span class="literal">undefined</span></div></pre></td></tr></table></figure>
<h3 id="内置子类"><a href="#内置子类" class="headerlink" title="内置子类"></a>内置子类</h3><p>在ES6中，内置的<code>Array</code>,<code>Date</code>,<code>DOM Element</code>可以拥有子类了。</p>
<p>名为<code>Ctor</code>的函数对象构建现在需要两步</p>
<ul>
<li>调用<code>Ctor[@@create]</code>来激活对象，安装任何特殊的行为；</li>
<li>激活新实例的构造器完成初始化</li>
</ul>
<p><code>@@create</code>symbol 可以通过<code>Symbol.create</code>获取到，内置对象现在暴露出了它们的特点的<code>@@create</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Pseudo-code of Array</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Array</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(...args) &#123; <span class="comment">/* ... */</span> &#125;</div><div class="line">    <span class="keyword">static</span> [<span class="built_in">Symbol</span>.create]() &#123;</div><div class="line">        <span class="comment">// Install special [[DefineOwnProperty]]</span></div><div class="line">        <span class="comment">// to magically update 'length'</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// User code of Array subclass</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyArray</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(...args) &#123; <span class="keyword">super</span>(...args); &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Two-phase 'new':</span></div><div class="line"><span class="comment">// 1) Call @@create to allocate object</span></div><div class="line"><span class="comment">// 2) Invoke constructor on new instance</span></div><div class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> MyArray();</div><div class="line">arr[<span class="number">1</span>] = <span class="number">12</span>;</div><div class="line">arr.length == <span class="number">2</span></div></pre></td></tr></table></figure>
<h3 id="Math-Number-String-Array-Object-APIs"><a href="#Math-Number-String-Array-Object-APIs" class="headerlink" title="Math + Number + String + Array + Object APIs"></a>Math + Number + String + Array + Object APIs</h3><p>ES6 为很多旧有对象添加了新的API，这些对象包括<code>Math</code>,<code>Array转换帮助器</code>，<code>String helpers</code>,方便复制的<code>Object.assign</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Number</span>.EPSILON</div><div class="line"><span class="built_in">Number</span>.isInteger(<span class="literal">Infinity</span>) <span class="comment">// false</span></div><div class="line"><span class="built_in">Number</span>.isNaN(<span class="string">"NaN"</span>) <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="built_in">Math</span>.acosh(<span class="number">3</span>) <span class="comment">// 1.762747174039086</span></div><div class="line"><span class="built_in">Math</span>.hypot(<span class="number">3</span>, <span class="number">4</span>) <span class="comment">// 5</span></div><div class="line"><span class="built_in">Math</span>.imul(<span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">32</span>) - <span class="number">1</span>, <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">32</span>) - <span class="number">2</span>) <span class="comment">// 2</span></div><div class="line"></div><div class="line"><span class="string">"abcde"</span>.includes(<span class="string">"cd"</span>) <span class="comment">// true</span></div><div class="line"><span class="string">"abc"</span>.repeat(<span class="number">3</span>) <span class="comment">// "abcabcabc"</span></div><div class="line"></div><div class="line"><span class="built_in">Array</span>.from(<span class="built_in">document</span>.querySelectorAll(<span class="string">'*'</span>)) <span class="comment">// Returns a real Array</span></div><div class="line"><span class="built_in">Array</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) <span class="comment">// Similar to new Array(...), but without special one-arg behavior</span></div><div class="line">[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>].fill(<span class="number">7</span>, <span class="number">1</span>) <span class="comment">// [0,7,7]</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].find(<span class="function"><span class="params">x</span> =&gt;</span> x == <span class="number">3</span>) <span class="comment">// 3</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].findIndex(<span class="function"><span class="params">x</span> =&gt;</span> x == <span class="number">2</span>) <span class="comment">// 1</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">3</span>, <span class="number">0</span>) <span class="comment">// [1, 2, 3, 1, 2]</span></div><div class="line">[<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>].entries() <span class="comment">// iterator [0, "a"], [1,"b"], [2,"c"]</span></div><div class="line">[<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>].keys() <span class="comment">// iterator 0, 1, 2</span></div><div class="line">[<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>].values() <span class="comment">// iterator "a", "b", "c"</span></div><div class="line"></div><div class="line"><span class="built_in">Object</span>.assign(Point, &#123; <span class="attr">origin</span>: <span class="keyword">new</span> Point(<span class="number">0</span>,<span class="number">0</span>) &#125;)</div></pre></td></tr></table></figure>
<h3 id="二进制和八进制字面量"><a href="#二进制和八进制字面量" class="headerlink" title="二进制和八进制字面量"></a>二进制和八进制字面量</h3><p>ES6支持已字面量的形式添加二进制和八进制字符了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">0b111110111</span> === <span class="number">503</span> <span class="comment">// true</span></div><div class="line"><span class="number">0o767</span> === <span class="number">503</span> <span class="comment">// true</span></div></pre></td></tr></table></figure>
<h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><p>Promise为异步编程提供了一种新的方式，Promise把未来将用到的值当做一等对象，Promise在很多前端库中已经有所支持了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeout</span>(<span class="params">duration = <span class="number">0</span></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">        setTimeout(resolve, duration);</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p = timeout(<span class="number">1000</span>).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> timeout(<span class="number">2000</span>);</div><div class="line">&#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"hmm"</span>);</div><div class="line">&#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.all([timeout(<span class="number">100</span>), timeout(<span class="number">200</span>)]);</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="Reflect-API"><a href="#Reflect-API" class="headerlink" title="Reflect API"></a>Reflect API</h3><p>这类API提供了运行时 对对象的 meta-operations 进行操作的方法，对比Proxy API，这是更高效的，并且允许进行类似的<code>proxy traps</code>的调用，在执行部署proxies时非常有效。</p>
<h3 id="Tail-Calls"><a href="#Tail-Calls" class="headerlink" title="Tail Calls"></a>Tail Calls</h3><p>尾部位置的调用被保证不能不受限制的拓展栈，这使得在面对无限制输入时的递归算法更加安全。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">n, acc = <span class="number">1</span></span>) </span>&#123;</div><div class="line"><span class="meta">    'use strict'</span>;</div><div class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span> acc;</div><div class="line">    <span class="keyword">return</span> factorial(n - <span class="number">1</span>, n * acc);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Stack overflow in most implementations today,</span></div><div class="line"><span class="comment">// but safe on arbitrary inputs in ES6</span></div><div class="line">factorial(<span class="number">100000</span>)</div></pre></td></tr></table></figure>
<h3 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a>原文链接</h3><p><a href="https://github.com/lukehoban/es6features" target="_blank" rel="external">ECMAScript 6 Features</a></p>
</div></article></div></main><footer><div class="paginator"><a href="/2017/06/19/hello-world/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://yoursite.com">zhang wang</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>